---
interface Props {
	stepNumber: number;
	icon: 'mail' | 'hearing' | 'check' | 'delivery';
	title: string;
	description: string;
	linkText?: string;
	linkHref?: string;
}

const { stepNumber, icon, title, description, linkText, linkHref } = Astro.props;

const iconPaths: Record<Props['icon'], string> = {
	mail: '/icons/flow-mail.png',
	hearing: '/icons/flow-hearing.png',
	check: '/icons/flow-check.png',
	delivery: '/icons/flow-delivery.png',
};

const iconSrc = iconPaths[icon];
---

<article class="grid w-full grid-rows-[auto_auto_auto_1fr] gap-y-16px rounded-16px bg-white px-24px pb-24px pt-16px shadow-card md:row-span-4 md:grid-rows-subgrid md:gap-y-24px">
	<div class="flex justify-center">
		<span class="inline-block rounded-6px bg-primary px-16px py-4px text-2xl font-medium text-white">
			STEP{stepNumber}
		</span>
	</div>

	<div class="flex h-24 items-center justify-center md:h-105px">
		<img src={iconSrc} alt="" class="h-full w-auto" />
	</div>

	<h3 class="text-center text-xl font-bold leading-snug text-primary">{title}</h3>

	<p class="text-left text-sm leading-relaxed-plus text-text-muted">
		{linkText && linkHref ? (
			<>
				{description.split('{link}')[0]}
				<a
					href={linkHref}
					class="font-bold text-primary underline underline-offset-2 hover:no-underline"
				>
					{linkText}
				</a>
				{description.split('{link}')[1]}
			</>
		) : (
			description
		)}
	</p>
</article>
